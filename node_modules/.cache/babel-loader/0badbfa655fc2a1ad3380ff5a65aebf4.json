{"ast":null,"code":"var _jsxFileName = \"/Users/mr.mac/SolanaHackathon/solana-tutorial/src/Pages/02_SendTransactions.js\",\n    _s = $RefreshSig$();\n\nimport { Explanation, ExplanationText, Footer, Section, Title } from \"../Components/Explanation\";\nimport { BrowserRouter as Router, useHistory } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { Transaction, SystemProgram, PublicKey, Account, sendAndConfirmTransaction } from \"@solana/web3.js\";\nimport fetchAllAcountInfo from \"../utils/fetchAllAccountInfo\";\nimport AccountCard from \"../Components/AccountCard\";\nimport Github from \"../Components/Github\";\nimport { Row, Col, Container } from \"react-grid-system\";\nimport Spinner from \"../Components/Spinner\";\nimport Link from \"../Components/Link\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SendTransaction = ({\n  accountList,\n  connection\n}) => {\n  _s();\n\n  const [transaction, setTransactions] = useState(false);\n  const [value, setValue] = useState(\"\");\n  const [balanceLoading, setBalanceLoading] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  const sendTransactions = async () => {\n    var _transaction$;\n\n    setLoading(true);\n    const account = new Account(transaction === null || transaction === void 0 ? void 0 : transaction[0].secretKey);\n    const valueToSend = value * 1000000000;\n    console.log(valueToSend);\n    const secondAccount = new PublicKey(transaction[1].publicKey.toString());\n    const sendTransaction = new Transaction().add(SystemProgram.transfer({\n      fromPubkey: account.publicKey,\n      toPubkey: secondAccount,\n      lamports: valueToSend\n    }));\n    await sendAndConfirmTransaction(connection, sendTransaction, [account], {\n      skipPreflight: true\n    });\n    const accountDetailOne = await fetchAllAcountInfo(account.publicKey, connection);\n    let accountDetailTwo = await fetchAllAcountInfo(secondAccount, connection);\n    setTransactions([{ ...accountDetailOne,\n      secretKey: transaction === null || transaction === void 0 ? void 0 : (_transaction$ = transaction[0]) === null || _transaction$ === void 0 ? void 0 : _transaction$.secretKey\n    }, accountDetailTwo]);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    const getNewAccount = async () => {\n      const secondAccount = await new PublicKey(\"DoFxSedewimW1j8wz1LDhNUsqWs97aytqXkhFj8WBz8H\");\n\n      if (connection) {\n        var _accountList$, _accountList$2;\n\n        setLoading(true);\n        setBalanceLoading(true);\n        const mainAccount = new PublicKey(accountList === null || accountList === void 0 ? void 0 : (_accountList$ = accountList[0]) === null || _accountList$ === void 0 ? void 0 : _accountList$.publicKey.toString());\n        const accountDetailOne = await fetchAllAcountInfo(mainAccount, connection);\n        let accountDetailTwo = await fetchAllAcountInfo(secondAccount, connection);\n        const airDrop = await connection.requestAirdrop(mainAccount, 1000000000);\n        setTransactions([{ ...accountDetailOne,\n          secretKey: accountList === null || accountList === void 0 ? void 0 : (_accountList$2 = accountList[0]) === null || _accountList$2 === void 0 ? void 0 : _accountList$2.secretKey\n        }, accountDetailTwo]);\n\n        const tryAgain = async (number = 10) => {\n          const mainAccountUpdated = await fetchAllAcountInfo(mainAccount, connection);\n\n          if (abortController.signal.aborted) {\n            return;\n          }\n\n          if (mainAccountUpdated.balance > (accountDetailOne === null || accountDetailOne === void 0 ? void 0 : accountDetailOne.balance)) {\n            {\n              var _accountList$3;\n\n              setTransactions([{ ...mainAccountUpdated,\n                secretKey: accountList === null || accountList === void 0 ? void 0 : (_accountList$3 = accountList[0]) === null || _accountList$3 === void 0 ? void 0 : _accountList$3.secretKey\n              }, accountDetailTwo]);\n              setBalanceLoading(false);\n              return;\n            }\n          } else {\n            if (balanceLoading) {\n              await new Promise(resolve => setTimeout(() => resolve(), 2000));\n              await tryAgain(airDrop, number - 1);\n            }\n          }\n        };\n\n        tryAgain();\n        setLoading(false);\n      }\n    };\n\n    getNewAccount();\n    return () => {\n      abortController.abort();\n    };\n  }, [connection]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Spinner, {\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(Explanation, {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: \"Let's try sending a transaction!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ExplanationText, {\n          children: \"Some money has been airdropped into one of the accounts you created previously! Airdropping means that we have deposited some Solana that you can play with on your account. This can take a few seconds.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ExplanationText, {\n          children: \"To send a transaction do this, you need the reciever wallet, and the send wallet. This page has two generated accounts. The first account, is the one you previously generated in the last screen. The second account is a dummy account created to track public transactions from users who go through this tutorial. If you want to check the transactions of other users, you can see a list of all transactions here:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: 5,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Title, {\n              children: \"Sender Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AccountCard, {\n            account: transaction[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 2,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              height: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                width: \"50%\",\n                margin: \"auto\"\n              },\n              src: \"Arrow_east.svg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 5,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Title, {\n              children: \"Receiving Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AccountCard, {\n            account: transaction[1],\n            loadingBalance: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        className: \"column-mobile\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              border: \"none\",\n              outline: \"none\",\n              borderBottom: \"1px solid black\"\n            },\n            type: \"number\",\n            placeholder: \"0.00500000\",\n            step: \"0.00000500\",\n            onChange: e => {\n              setValue(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"send-transaction\",\n            onClick: sendTransactions,\n            children: \"Send coins to new account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: \"20px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/success`,\n          className: !accountList.length ? \"disabled\" : \"created\",\n          children: \"Finish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Footer, {\n        children: /*#__PURE__*/_jsxDEV(Github, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SendTransaction, \"VYP6wD7x9DzkM1rU4QqKPDHYSeU=\");\n\n_c = SendTransaction;\nexport default SendTransaction;\n\nvar _c;\n\n$RefreshReg$(_c, \"SendTransaction\");","map":{"version":3,"sources":["/Users/mr.mac/SolanaHackathon/solana-tutorial/src/Pages/02_SendTransactions.js"],"names":["Explanation","ExplanationText","Footer","Section","Title","BrowserRouter","Router","useHistory","useEffect","useState","Transaction","SystemProgram","PublicKey","Account","sendAndConfirmTransaction","fetchAllAcountInfo","AccountCard","Github","Row","Col","Container","Spinner","Link","SendTransaction","accountList","connection","transaction","setTransactions","value","setValue","balanceLoading","setBalanceLoading","loading","setLoading","sendTransactions","account","secretKey","valueToSend","console","log","secondAccount","publicKey","toString","sendTransaction","add","transfer","fromPubkey","toPubkey","lamports","skipPreflight","accountDetailOne","accountDetailTwo","abortController","AbortController","getNewAccount","mainAccount","airDrop","requestAirdrop","tryAgain","number","mainAccountUpdated","signal","aborted","balance","Promise","resolve","setTimeout","abort","textAlign","display","height","width","margin","border","outline","borderBottom","e","target","length"],"mappings":"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","sourcesContent":["import {\n  Explanation,\n  ExplanationText,\n  Footer,\n  Section,\n  Title,\n} from \"../Components/Explanation\";\nimport { BrowserRouter as Router, useHistory } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport {\n  Transaction,\n  SystemProgram,\n  PublicKey,\n  Account,\n  sendAndConfirmTransaction,\n} from \"@solana/web3.js\";\n\nimport fetchAllAcountInfo from \"../utils/fetchAllAccountInfo\";\nimport AccountCard from \"../Components/AccountCard\";\nimport Github from \"../Components/Github\";\nimport { Row, Col, Container } from \"react-grid-system\";\nimport Spinner from \"../Components/Spinner\";\nimport Link from \"../Components/Link\";\n\nconst SendTransaction = ({ accountList, connection }) => {\n  const [transaction, setTransactions] = useState(false);\n  const [value, setValue] = useState(\"\");\n  const [balanceLoading, setBalanceLoading] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  const sendTransactions = async () => {\n    setLoading(true);\n    const account = new Account(transaction?.[0].secretKey);\n    const valueToSend = value * 1000000000;\n    console.log(valueToSend);\n    const secondAccount = new PublicKey(transaction[1].publicKey.toString());\n\n    const sendTransaction = new Transaction().add(\n      SystemProgram.transfer({\n        fromPubkey: account.publicKey,\n        toPubkey: secondAccount,\n        lamports: valueToSend,\n      }),\n    );\n\n    await sendAndConfirmTransaction(connection, sendTransaction, [account], {\n      skipPreflight: true,\n    });\n\n    const accountDetailOne = await fetchAllAcountInfo(\n      account.publicKey,\n      connection,\n    );\n\n    let accountDetailTwo = await fetchAllAcountInfo(secondAccount, connection);\n\n    setTransactions([\n      { ...accountDetailOne, secretKey: transaction?.[0]?.secretKey },\n      accountDetailTwo,\n    ]);\n\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    const getNewAccount = async () => {\n      const secondAccount = await new PublicKey(\n        \"DoFxSedewimW1j8wz1LDhNUsqWs97aytqXkhFj8WBz8H\",\n      );\n\n      if (connection) {\n        setLoading(true);\n        setBalanceLoading(true);\n\n        const mainAccount = new PublicKey(\n          accountList?.[0]?.publicKey.toString(),\n        );\n\n        const accountDetailOne = await fetchAllAcountInfo(\n          mainAccount,\n          connection,\n        );\n\n        let accountDetailTwo = await fetchAllAcountInfo(\n          secondAccount,\n          connection,\n        );\n\n        const airDrop = await connection.requestAirdrop(\n          mainAccount,\n          1000000000,\n        );\n\n        setTransactions([\n          { ...accountDetailOne, secretKey: accountList?.[0]?.secretKey },\n          accountDetailTwo,\n        ]);\n\n        const tryAgain = async (number = 10) => {\n          const mainAccountUpdated = await fetchAllAcountInfo(\n            mainAccount,\n            connection,\n          );\n          if (abortController.signal.aborted) {\n            return;\n          }\n\n          if (mainAccountUpdated.balance > accountDetailOne?.balance) {\n            {\n              setTransactions([\n                {\n                  ...mainAccountUpdated,\n                  secretKey: accountList?.[0]?.secretKey,\n                },\n                accountDetailTwo,\n              ]);\n\n              setBalanceLoading(false);\n\n              return;\n            }\n          } else {\n            if (balanceLoading) {\n              await new Promise((resolve) => setTimeout(() => resolve(), 2000));\n\n              await tryAgain(airDrop, number - 1);\n            }\n          }\n        };\n\n        tryAgain();\n\n        setLoading(false);\n      }\n    };\n\n    getNewAccount();\n    return () => {\n      abortController.abort();\n    };\n  }, [connection]);\n\n  return (\n    <>\n      <Spinner loading={loading} />\n      <Container className=\"wrapper\">\n        <Explanation>\n          <Title>Let's try sending a transaction!</Title>\n          <ExplanationText>\n            Some money has been airdropped into one of the accounts you created\n            previously! Airdropping means that we have deposited some Solana\n            that you can play with on your account. This can take a few seconds.\n          </ExplanationText>\n          <ExplanationText>\n            To send a transaction do this, you need the reciever wallet, and the\n            send wallet. This page has two generated accounts. The first\n            account, is the one you previously generated in the last screen. The\n            second account is a dummy account created to track public\n            transactions from users who go through this tutorial. If you want to\n            check the transactions of other users, you can see a list of all\n            transactions here:\n          </ExplanationText>\n        </Explanation>\n\n        <Row>\n          <Col xs={5}>\n            <div\n              style={{\n                textAlign: \"center\",\n              }}\n            >\n              <Title>Sender Account</Title>\n            </div>\n            <AccountCard account={transaction[0]} />\n          </Col>\n          <Col xs={2}>\n            <div\n              style={{\n                display: \"flex\",\n                height: \"100%\",\n              }}\n            >\n              <img\n                style={{\n                  width: \"50%\",\n                  margin: \"auto\",\n                }}\n                src=\"Arrow_east.svg\"\n              />\n            </div>\n          </Col>\n          <Col xs={5}>\n            <div\n              style={{\n                textAlign: \"center\",\n              }}\n            >\n              <Title>Receiving Account</Title>\n            </div>\n            <AccountCard account={transaction[1]} loadingBalance={loading} />\n          </Col>\n        </Row>\n\n        <Section />\n        <Section className={\"column-mobile\"}>\n          <div\n            style={{\n              display: \"flex\",\n              width: \"100%\",\n            }}\n          >\n            <input\n              style={{\n                border: \"none\",\n                outline: \"none\",\n                borderBottom: \"1px solid black\",\n              }}\n              type=\"number\"\n              placeholder=\"0.00500000\"\n              step=\"0.00000500\"\n              onChange={(e) => {\n                setValue(e.target.value);\n              }}\n            ></input>\n            <button className={\"send-transaction\"} onClick={sendTransactions}>\n              Send coins to new account\n            </button>\n          </div>\n          <div style={{ height: \"20px\" }} />\n\n          <Link\n            to={`/success`}\n            className={!accountList.length ? \"disabled\" : \"created\"}\n          >\n            Finish\n          </Link>\n        </Section>\n      </Container>\n      <Container>\n        <Footer>\n          <Github />\n        </Footer>\n      </Container>\n    </>\n  );\n};\n\nexport default SendTransaction;\n"]},"metadata":{},"sourceType":"module"}